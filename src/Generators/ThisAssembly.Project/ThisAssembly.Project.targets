<Project>

  <Import Project="$(MSBuildThisFileDirectory)ThisAssembly.Common.targets"
          Condition="'$(ThisAssemblyCommonTargetsImported)' != 'true'"/>

  <PropertyGroup>
    <InjectThisAssemblyProjectDependsOn Condition="'$(SourceControlInformationFeatureSupported)' == 'true'">
      InitializeSourceControlInformation
    </InjectThisAssemblyProjectDependsOn>
  </PropertyGroup>

  <PropertyGroup Condition="'$(ThisAssembly_IncludeDefaultProjectProperties)' != 'false'">
    <ThisAssembly_IncludeDefaultProjectProperties>true</ThisAssembly_IncludeDefaultProjectProperties>
  </PropertyGroup>
  <ItemGroup Condition="$(ThisAssembly_IncludeDefaultProjectProperties)">
    <ProjectProperty Include="AssemblyName" />
    <ProjectProperty Include="RootNamespace" />
    <ProjectProperty Include="TargetFrameworkIdentifier" />
    <ProjectProperty Include="TargetFrameworkMoniker" />
    <ProjectProperty Include="TargetFrameworkVersion" />
  </ItemGroup>
  
  <Target Name="InjectThisAssemblyProject"
          DependsOnTargets="$(InjectThisAssemblyProjectDependsOn)" 
          BeforeTargets="PrepareForBuild;CompileDesignTime;GenerateMSBuildEditorConfigFileShouldRun">
    <PropertyGroup>
      <ThisAssembly_ProjectProperties>@(ProjectProperty, '|')</ThisAssembly_ProjectProperties>
    </PropertyGroup>
    <ItemGroup Condition="'$(ThisAssembly_ProjectProperties)' != ''">
      <CompilerVisibleProperty Include="@(ProjectProperty)" />
      <CompilerVisibleProperty Include="ThisAssembly_ProjectProperties" />
    </ItemGroup>
  </Target>
  
</Project>
