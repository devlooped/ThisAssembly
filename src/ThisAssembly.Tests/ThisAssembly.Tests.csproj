<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <IsPackable>false</IsPackable>
    <TargetFramework>net6.0</TargetFramework>
    <TargetFramework Condition="'$(BuildingInsideVisualStudio)' == 'true'">net472</TargetFramework>
    <RootNamespace>ThisAssemblyTests</RootNamespace>
    <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
  </PropertyGroup>

  <!-- These attributes are hardcoded in AssemblyInfoTests.cs -->
  <PropertyGroup>
    <GenerateAssemblyConfigurationAttribute>false</GenerateAssemblyConfigurationAttribute>
    <GenerateAssemblyCompanyAttribute>false</GenerateAssemblyCompanyAttribute>
    <GenerateAssemblyCopyrightAttribute>false</GenerateAssemblyCopyrightAttribute>
    <GenerateAssemblyTitleAttribute>false</GenerateAssemblyTitleAttribute>
    <GenerateAssemblyDescriptionAttribute>false</GenerateAssemblyDescriptionAttribute>
    <GenerateAssemblyProductAttribute>false</GenerateAssemblyProductAttribute>
    <GenerateAssemblyVersionAttribute>false</GenerateAssemblyVersionAttribute>
    <GenerateAssemblyInformationalVersionAttribute>false</GenerateAssemblyInformationalVersionAttribute>
    <GenerateAssemblyFileVersionAttribute>false</GenerateAssemblyFileVersionAttribute>
  </PropertyGroup>

  <!--
    Import .props files from source generator projects.
    This happens automatically for package references that have <PackageName>.props in the build/ folder;
    for project references we must do it manually.
  -->
  <Import Project="$(SourceRoot)Common\ThisAssembly.Common.props" />
  <Import Project="$(GeneratorsRoot)ThisAssembly.AssemblyInfo\ThisAssembly.AssemblyInfo.props" />
  <Import Project="$(GeneratorsRoot)ThisAssembly.Constants\ThisAssembly.Constants.props" />
  <Import Project="$(GeneratorsRoot)ThisAssembly.Metadata\ThisAssembly.Metadata.props" />
  <Import Project="$(GeneratorsRoot)ThisAssembly.Project\ThisAssembly.Project.props" />
  <Import Project="$(GeneratorsRoot)ThisAssembly.Strings\ThisAssembly.Strings.props" />

  <ItemGroup>
    <ProjectReference Include="$(GeneratorsRoot)ThisAssembly.AssemblyInfo\ThisAssembly.AssemblyInfo.csproj" />
    <ProjectReference Include="$(GeneratorsRoot)ThisAssembly.Constants\ThisAssembly.Constants.csproj" />
    <ProjectReference Include="$(GeneratorsRoot)ThisAssembly.Metadata\ThisAssembly.Metadata.csproj" />
    <ProjectReference Include="$(GeneratorsRoot)ThisAssembly.Project\ThisAssembly.Project.csproj" />
    <ProjectReference Include="$(GeneratorsRoot)ThisAssembly.Strings\ThisAssembly.Strings.csproj" />
    <ProjectReference Update="@(ProjectReference)" OutputItemType="Analyzer" ReferenceOutputAssembly="false" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio" />
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Update="Resources.resx">
      <Generator></Generator>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </EmbeddedResource>
  </ItemGroup>

  <PropertyGroup>
    <Foo>Bar</Foo>
  </PropertyGroup>

  <ItemGroup>
    <ProjectProperty Include="Foo" />
    <Constant Include="Foo.Bar" Value="Baz" Comment="Yay!" />
    <Constant Include="Foo.Hello" Value="World" Comment="Comments make everything better 😍" />
    <FileConstant Include="@(None)" />
    <FileConstant Update="@(FileConstant -> WithMetadataValue('Filename', 'Readme'))">
      <Link>Included\%(Filename)%(Extension)</Link>
    </FileConstant>
    <AssemblyMetadata Include="Foo" Value="Bar" />
  </ItemGroup>

  <!--
    Import .targets files from source generator projects.
    This happens automatically for package references that have <PackageName>.props in the build/ folder;
    for project references we must do it manually.
  -->
  <Import Project="$(SourceRoot)Common\ThisAssembly.Common.targets" />
  <Import Project="$(GeneratorsRoot)ThisAssembly.AssemblyInfo\ThisAssembly.AssemblyInfo.targets" />
  <Import Project="$(GeneratorsRoot)ThisAssembly.Constants\ThisAssembly.Constants.targets" />
  <Import Project="$(GeneratorsRoot)ThisAssembly.Metadata\ThisAssembly.Metadata.targets" />
  <Import Project="$(GeneratorsRoot)ThisAssembly.Project\ThisAssembly.Project.targets" />
  <Import Project="$(GeneratorsRoot)ThisAssembly.Strings\ThisAssembly.Strings.targets" />

</Project>
